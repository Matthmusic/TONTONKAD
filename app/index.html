<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no"/>
    <title>TontonKAD - Organisateur de Fourreaux & C√¢bles</title>
    <meta name="description" content="Application web pour organiser fourreaux et c√¢bles √©lectriques - Calcul d'occupation et visualisation 2D"/>
    <meta name="keywords" content="fourreaux, c√¢bles, √©lectricit√©, organisation, calcul, visualisation"/>
    <meta name="author" content="TontonKAD"/>
    
    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website"/>
    <meta property="og:title" content="TontonKAD - Organisateur de Fourreaux & C√¢bles"/>
    <meta property="og:description" content="Application web pour organiser fourreaux et c√¢bles √©lectriques"/>
    <meta property="og:image" content="TONTONKAD.svg"/>
    
    <!-- Security -->
    <meta http-equiv="Content-Security-Policy" content="default-src 'self'; style-src 'self' 'unsafe-inline'; script-src 'self' 'unsafe-inline'; img-src 'self' data:; connect-src 'self'"/>
    
    <link rel="icon" type="image/svg+xml" href="TONTONKAD.svg"/>
    <link rel="stylesheet" href="style.css"/>
    
    <!-- PWA Configuration -->
    <link rel="manifest" href="manifest.json">
    <meta name="theme-color" content="#475569">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <meta name="apple-mobile-web-app-title" content="TontonKAD">
    <link rel="apple-touch-icon" href="TONTONKAD.svg">
    
    <!-- Pr√©chargement des ressources critiques -->
    <link rel="preload" href="script.js" as="script">
</head>
<body>
  <div class="wrap">
    <aside class="panel">
      <div class="panel-resize-handle"></div>
      <div class="brand">
        <img src="TONTONKAD.svg" class="logo" alt="Logo" />
        <h1>Organisateur de Fourreaux & C√¢bles</h1>
      </div>
      <div class="panel-controls">
        <div class="row">
          <label for="shape">Forme de la bo√Æte</label>
          <select id="shape">
            <option value="rect">Bo√Æte rectangulaire</option>
            <option value="circ">Conduit circulaire</option>
            <option value="chemin_de_cable">Chemin de c√¢ble</option>
          </select>
        </div>
        <div id="rectInputs">
          <div class="row">
            <label for="boxW">Largeur (mm)</label>
            <div class="input-lock-group">
              <input id="boxW" type="number" step="0.1" value="1000" />
              <label class="lock-checkbox">
                <input type="checkbox" id="lockWidth" />
                <span class="lock-icon">üîí</span>
                <span class="lock-text">Verrouiller</span>
              </label>
            </div>
          </div>
          <div class="row">
            <label for="boxH">Hauteur (mm)</label>
            <div class="input-lock-group">
              <input id="boxH" type="number" step="0.1" value="1000" />
              <label class="lock-checkbox">
                <input type="checkbox" id="lockHeight" />
                <span class="lock-icon">üîí</span>
                <span class="lock-text">Verrouiller</span>
              </label>
            </div>
          </div>
          <div class="apply-dimensions-container">
            <button id="apply" class="btn apply-btn hidden" aria-label="Appliquer les nouvelles dimensions - Raccourci: Entr√©e">
              <svg class="icon" viewBox="0 0 24 24" aria-hidden="true">
                <title>Appliquer les dimensions</title>
                <path d="M20 6L9 17l-5-5" stroke="currentColor" stroke-width="2" fill="none" stroke-linecap="round" stroke-linejoin="round"/>
              </svg>
              <span class="apply-text">Appliquer dimensions</span>
            </button>
          </div>
        </div>
        <div id="circInputs" class="hidden">
          <div class="row">
            <label for="boxD">Diam√®tre (mm)</label>
            <input id="boxD" type="number" step="0.1" value="1000" />
          </div>
          <div class="apply-dimensions-container">
            <button id="applyCirc" class="btn apply-btn hidden" aria-label="Appliquer les nouvelles dimensions - Raccourci: Entr√©e">
              <svg class="icon" viewBox="0 0 24 24" aria-hidden="true">
                <title>Appliquer les dimensions</title>
                <path d="M20 6L9 17l-5-5" stroke="currentColor" stroke-width="2" fill="none" stroke-linecap="round" stroke-linejoin="round"/>
              </svg>
              <span class="apply-text">Appliquer dimensions</span>
            </button>
          </div>
        </div>
        <div class="card hidden">
          <div class="row">
            <label for="targetPxPerMm">√âchelle cible (px/mm)</label>
            <input id="targetPxPerMm" type="number" step="0.01" value="1.00" />
          </div>
        </div>
        <div class="card">
          <div class="tabs">
            <div id="tabFOURREAU" class="tab active">FOURREAU</div>
            <div id="tabCABLE" class="tab">C√ÇBLE</div>
          </div>
          <div id="paneFOURREAU">
            <div class="row">
              <label for="fourreauSelect">Type de Fourreau</label>
              <select id="fourreauSelect"></select>
            </div>
            <div class="small">
              Le Fourreau est un <b>anneau</b>¬†:
              <span class="pill">√ò ext = code</span>,
              <span class="pill">√ò int ‚â• liste</span>.
            </div>
          </div>
          <div id="paneCABLE" class="hidden">
            <div class="row">
              <label for="cableSelect">Type de C√¢ble</label>
              <select id="cableSelect"></select>
            </div>
            <div class="small">
              Un C√¢ble est <b>plein</b>, contr√¥le √ò si dans un Fourreau.
            </div>
          </div>
        </div>
        <div class="two-cols">
          <div class="card listwrap">
            <div class="headerline">
              <b>Inventaire Fourreaux</b>
              <span class="muted">
                Objets: <span id="countInvF">0</span> ‚Ä¢ Types:
                <span id="typesInvF">0</span>
              </span>
            </div>
            <input
              id="searchFourreau"
              class="search"
              placeholder="Rechercher Fourreau (type, code)‚Ä¶"
            />
            <div
              id="listFourreau"
              class="list"
              role="listbox"
              aria-label="Inventaire Fourreaux"
            ></div>
            <div class="small">
              1 ligne par type (√ó quantit√©). Clique pour s√©lectionner un
              exemplaire, double‚Äëclic pour passer au suivant.
            </div>
          </div>
          <div class="card listwrap">
            <div class="headerline">
              <b>Inventaire C√¢bles</b>
              <span class="muted">
                Objets: <span id="countInvC">0</span> ‚Ä¢ Types:
                <span id="typesInvC">0</span>
              </span>
            </div>
            <input
              id="searchCable"
              class="search"
              placeholder="Rechercher C√ÇBLE (famille, code)‚Ä¶"
            />
            <div
              id="listCable"
              class="list"
              role="listbox"
              aria-label="Inventaire C√ÇBLES"
            ></div>
            <div class="small">
              1 ligne par type (√ó quantit√©). Clique pour s√©lectionner un
              exemplaire, double‚Äëclic pour passer au suivant.
            </div>
          </div>
        </div>
        <div class="card">
          <b>D√©tails s√©lection</b>
          <div id="selInfo" class="info-list muted">
            Aucun objet s√©lectionn√©.
          </div>
        </div>
      </div>
      
      <div class="panel-stats">
        <div class="card">
          <div class="row">
            <div>Total Fourreaux</div>
            <div class="kpi">
              <span id="statFourreau">0</span>
            </div>
          </div>
          <div class="row">
            <div>Total C√¢bles</div>
            <div class="kpi">
              <span id="statCable">0</span>
            </div>
          </div>
          <div class="row">
            <div>Taux d'occupation</div>
            <div class="kpi">
              <span id="statOccupation">0.0 %</span>
            </div>
          </div>
          <div class="row">
            <div>√âchelle d'affichage</div>
            <div>
              <span id="scaleInfo">‚Äî</span>
            </div>
          </div>
        </div>
      </div>
    </aside>
    <div class="canvas-section">
      <div class="main-view">
        <div class="main-view-content">
          <main class="canvas-wrap">
            <canvas id="world"></canvas>
            <!-- Cotes pour la largeur -->
            <div id="dimensionWidth" class="dimension-line horizontal" style="display: none;">
              <span class="dimension-text"></span>
            </div>
            <!-- Cotes pour la hauteur -->
            <div id="dimensionHeight" class="dimension-line vertical" style="display: none;">
              <span class="dimension-text"></span>
            </div>
            
            <!-- Bouton de r√©duction automatique -->
            <div id="reduceButtonContainer" class="reduce-button-container" style="display: none;">
              <button id="reduceToMinimum" class="btn reduce-btn">
                <svg class="icon" viewBox="0 0 24 24" aria-hidden="true">
                  <path d="M5 12h14M12 5l7 7-7 7" stroke="currentColor" stroke-width="2" fill="none" stroke-linecap="round" stroke-linejoin="round"/>
                </svg>
                R√©duire au minimum
              </button>
            </div>
          </main>
          <div class="zoom-control-vertical">
          <label for="zoomSlider">Zoom</label>
          <input
            id="zoomSlider"
            type="range"
            min="25"
            max="300"
            step="5"
            value="100"
          />
          <div class="zoom-value"><span id="zoomLabel">100</span>%</div>
          </div>
        </div>
      </div>
      <div class="canvas-controls">
        <div class="canvas-controls-row">
          <div class="canvas-controls-left">
            <button id="toolEdit" class="btn" aria-label="Outil d'√©dition - Raccourci: E">
              <svg class="icon" viewBox="0 0 24 24" aria-hidden="true">
                <title>Ic√¥ne d'√©dition</title>
                <path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7" stroke="#e5f0ff" stroke-width="2" fill="none" stroke-linecap="round" stroke-linejoin="round"/>
                <path d="M18.5 2.5a2.12 2.12 0 0 1 3 3L12 15l-4 1 1-4z" stroke="#e5f0ff" stroke-width="2" fill="none" stroke-linecap="round" stroke-linejoin="round"/>
              </svg>
              √âditer (E)
            </button>
            <button id="toolInfo" class="btn" aria-label="Outil d'information - Raccourci: I">
              <svg class="icon" viewBox="0 0 24 24" aria-hidden="true">
                <title>Ic√¥ne d'information</title>
                <circle cx="12" cy="12" r="10" stroke="#e5f0ff" stroke-width="2" fill="none"/>
                <path d="M9,9 h6 a3,3 0 0,1 0,6 h-6" stroke="#e5f0ff" stroke-width="2" fill="none" stroke-linecap="round" stroke-linejoin="round"/>
                <line x1="12" y1="17" x2="12.01" y2="17" stroke="#e5f0ff" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
              </svg>
              Infos (I)
            </button>
            <button id="gridArrange" class="btn" aria-label="Disposer les fourreaux en grille 3cm - Raccourci: Ctrl+G">
              <svg class="icon" viewBox="0 0 24 24" aria-hidden="true">
                <title>Ic√¥ne grille</title>
                <rect x="3" y="3" width="6" height="6" stroke="#e5f0ff" stroke-width="2" fill="none"/>
                <rect x="15" y="3" width="6" height="6" stroke="#e5f0ff" stroke-width="2" fill="none"/>
                <rect x="3" y="15" width="6" height="6" stroke="#e5f0ff" stroke-width="2" fill="none"/>
                <rect x="15" y="15" width="6" height="6" stroke="#e5f0ff" stroke-width="2" fill="none"/>
              </svg>
              Grille (Ctrl+G)
            </button>
            <button id="freezeBtn" class="btn" disabled aria-label="Figer l'objet s√©lectionn√© - Raccourci: G">Figer (G)</button>
            <button id="toolDelete" class="btn" aria-label="Supprimer l'objet s√©lectionn√© - Raccourci: Suppr">Supprimer (Suppr)</button>
          </div>
          <div class="canvas-controls-right">
            <button id="projectSave" class="btn" aria-label="Sauvegarder le projet - Raccourci: Ctrl+S">
              <svg class="icon" viewBox="0 0 24 24" aria-hidden="true">
                <title>Sauvegarder</title>
                <path d="M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z" stroke="currentColor" stroke-width="2" fill="none"/>
                <polyline points="17,21 17,13 7,13 7,21" stroke="currentColor" stroke-width="2" fill="none"/>
                <polyline points="7,3 7,8 15,8" stroke="currentColor" stroke-width="2" fill="none"/>
              </svg>
              Projets
            </button>
            <button id="exportDXF" class="btn" aria-label="Exporter le sch√©ma au format DXF">Export DXF</button>
            <button id="clear" class="btn" aria-label="Vider compl√®tement le canvas">Tout vider</button>
          </div>
        </div>
        <div class="canvas-controls-row">
          <div class="mouse-actions-cards">
            <div class="mouse-card" role="img" aria-label="Clic gauche pour s√©lectionner">
              <svg class="icon" viewBox="0 0 24 24" aria-hidden="true">
                <title>Clic gauche de souris</title>
                <rect x="5" y="3" width="14" height="18" rx="7" fill="#4b5563" />
                <rect x="9" y="5" width="6" height="6" rx="3" fill="#374151" />
                <path d="M5 9h7V3a7 7 0 0 0-7 6z" fill="#ef4444" />
              </svg>
              <span>S√©lection</span>
            </div>
            <div class="mouse-card" role="img" aria-label="Clic droit pour placer">
              <svg class="icon" viewBox="0 0 24 24" aria-hidden="true">
                <title>Clic droit de souris</title>
                <rect x="5" y="3" width="14" height="18" rx="7" fill="#4b5563" />
                <rect x="9" y="5" width="6" height="6" rx="3" fill="#374151" />
                <path d="M12 3v6h7a7 7 0 0 0-7-6z" fill="#ef4444" />
              </svg>
              <span>Placer</span>
            </div>
          </div>
          <div class="card">
            <div class="small">
              S√©lection/d√©placement&nbsp;: clic gauche (glisser). Placer&nbsp;: clic droit. Supprimer&nbsp;: Suppr ou bouton.
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  <div id="toast" class="toast">Impossible de placer l'√©l√©ment ici.</div>
  <script src="script.js" defer></script>
  <script src="dimension-button-handler.js" defer></script>
  
  <!-- PWA Service Worker -->
  <script>
    (function initPWA() {
      'use strict';
      
      if (!('serviceWorker' in navigator)) {
        console.warn('‚ö†Ô∏è Service Worker non support√© par ce navigateur');
        return;
      }

      window.addEventListener('load', () => {
        navigator.serviceWorker.register('./sw.js')
          .then((registration) => {
            
            // G√©rer les mises √† jour du service worker
            registration.addEventListener('updatefound', () => {
              const newWorker = registration.installing;
              if (!newWorker) return;
              
              newWorker.addEventListener('statechange', () => {
                if (newWorker.state === 'installed' && navigator.serviceWorker.controller) {
                  // Nouvelle version disponible
                  const shouldUpdate = confirm('üîÑ Une nouvelle version de TontonKAD est disponible. Recharger maintenant ?');
                  if (shouldUpdate) {
                    newWorker.postMessage({ type: 'SKIP_WAITING' });
                    window.location.reload();
                  }
                }
              });
            });
          })
          .catch((error) => {
            console.error('‚ùå Erreur lors de l\'enregistrement du Service Worker:', error);
            // Fallback silencieux - l'application fonctionne sans PWA
          });
      });

      // G√©rer les mises √† jour automatiques
      navigator.serviceWorker.addEventListener('controllerchange', () => {
        window.location.reload();
      });
    })();

    // Gestion de l'installation PWA
    (function initPWAInstall() {
      'use strict';
      
      let deferredPrompt = null;
      
      window.addEventListener('beforeinstallprompt', (e) => {
        e.preventDefault();
        deferredPrompt = e;
        
        // Cr√©er un bouton d'installation
        const installButton = document.createElement('div');
        installButton.className = 'rainbow-button';
        installButton.setAttribute('role', 'button');
        installButton.setAttribute('tabindex', '0');
        installButton.setAttribute('aria-label', 'Installer TontonKAD comme application');
        installButton.style.cssText = `
          position: absolute; 
          top: 20px; 
          right: 20px; 
          z-index: 1000;
          box-shadow: 0 4px 16px rgba(0,0,0,0.3);
          width: auto;
        `;
        
        // Cr√©er le bouton int√©rieur
        const innerButton = document.createElement('button');
        innerButton.className = 'rainbow-button-inner';
        innerButton.textContent = 'üì± Installer TontonKAD';
        innerButton.setAttribute('aria-label', 'Installer l\'application TontonKAD');
        
        installButton.appendChild(innerButton);
        
        // L'ajouter √† la section canvas
        const canvasSection = document.querySelector('.canvas-section');
        if (canvasSection) {
          canvasSection.appendChild(installButton);
        }
        
        // Gestionnaire d'√©v√©nement pour l'installation
        const handleInstall = () => {
          if (!deferredPrompt) return;
          
          installButton.style.display = 'none';
          deferredPrompt.prompt();
          
          deferredPrompt.userChoice
            .then((result) => {
              deferredPrompt = null;
            })
            .catch((error) => {
              console.error('Erreur lors de l\'installation PWA:', error);
            });
        };
        
        innerButton.addEventListener('click', handleInstall);
        
        // Support clavier
        installButton.addEventListener('keydown', (e) => {
          if (e.key === 'Enter' || e.key === ' ') {
            e.preventDefault();
            handleInstall();
          }
        });
      });

      // Cacher le bouton apr√®s installation
      window.addEventListener('appinstalled', () => {
        const installButton = document.querySelector('.rainbow-button');
        if (installButton) {
          installButton.remove();
        }
        deferredPrompt = null;
      });
    })();
  </script>

  <!-- Popup d'√©dition -->
  <div id="editPopup" class="edit-popup" style="display: none;" role="dialog" aria-labelledby="editPopupTitle" aria-modal="true">
    <div class="edit-popup-content">
      <h3 id="editPopupTitle">√âditer l'objet</h3>
      <div class="edit-field">
        <label for="editLabel">Libell√©/Commentaire :</label>
        <input type="text" id="editLabel" placeholder="Entrez un libell√©..." aria-describedby="editLabelHelp">
        <small id="editLabelHelp" class="sr-only">Ajoutez un libell√© descriptif pour cet objet</small>
      </div>
      <div class="edit-field">
        <label for="editColor">Couleur personnalis√©e :</label>
        <div class="color-controls">
          <input type="color" id="editColor" aria-describedby="editColorHelp">
          <div class="color-dropdown">
            <button id="autocadColorBtn" type="button" class="autocad-color-btn" aria-label="Choisir une couleur AutoCAD">
              <svg class="icon" viewBox="0 0 24 24" aria-hidden="true">
                <rect x="2" y="2" width="20" height="20" rx="2" fill="none" stroke="currentColor" stroke-width="2"/>
                <rect x="6" y="6" width="3" height="3" fill="#ff0000"/>
                <rect x="10.5" y="6" width="3" height="3" fill="#00ff00"/>
                <rect x="15" y="6" width="3" height="3" fill="#0000ff"/>
                <rect x="6" y="10.5" width="3" height="3" fill="#ffff00"/>
                <rect x="10.5" y="10.5" width="3" height="3" fill="#ff00ff"/>
                <rect x="15" y="10.5" width="3" height="3" fill="#00ffff"/>
                <rect x="6" y="15" width="3" height="3" fill="#ffffff" stroke="#666"/>
                <rect x="10.5" y="15" width="3" height="3" fill="#808080"/>
                <rect x="15" y="15" width="3" height="3" fill="#000000"/>
              </svg>
              Couleurs AutoCAD
            </button>
            <div id="colorDropdown" class="color-dropdown-content">
              <div id="colorGrid" class="color-grid">
                <!-- Grille g√©n√©r√©e dynamiquement -->
              </div>
            </div>
          </div>
          <button id="resetColor" type="button" aria-label="R√©tablir la couleur par d√©faut">Couleur par d√©faut</button>
        </div>
        <small id="editColorHelp" class="sr-only">Choisissez une couleur personnalis√©e avec la pipette ou la palette AutoCAD</small>
      </div>
      <div id="cablePhaseSection" class="edit-field" style="display: none;">
        <label>Conducteur unifilaire :</label>
        <div class="phase-checkboxes">
          <div class="checkbox-row">
            <input type="radio" id="phase-none" name="cablePhase" data-phase="none" checked>
            <label for="phase-none">
              <span class="phase-color" style="background-color: #666666;"></span>
              Aucun (couleur par d√©faut)
            </label>
          </div>
          <div class="checkbox-row">
            <input type="radio" id="phase-ph1" name="cablePhase" data-phase="ph1">
            <label for="phase-ph1">
              <span class="phase-color" style="background-color: #8B4513;"></span>
              L1 (Marron)
            </label>
          </div>
          <div class="checkbox-row">
            <input type="radio" id="phase-ph2" name="cablePhase" data-phase="ph2">
            <label for="phase-ph2">
              <span class="phase-color" style="background-color: #808080;"></span>
              L2 (Gris)
            </label>
          </div>
          <div class="checkbox-row">
            <input type="radio" id="phase-ph3" name="cablePhase" data-phase="ph3">
            <label for="phase-ph3">
              <span class="phase-color" style="background-color: #000000;"></span>
              L3 (Noir)
            </label>
          </div>
          <div class="checkbox-row">
            <input type="radio" id="phase-n" name="cablePhase" data-phase="n">
            <label for="phase-n">
              <span class="phase-color" style="background-color: #0000FF;"></span>
              N (Bleu)
            </label>
          </div>
          <div class="checkbox-row">
            <input type="radio" id="phase-pe" name="cablePhase" data-phase="pe">
            <label for="phase-pe">
              <span class="phase-color" style="background-color: #00FF00;"></span>
              PE (Vert fluo)
            </label>
          </div>
        </div>
      </div>
      <div class="edit-buttons">
        <button id="saveEdit" type="button" aria-label="Sauvegarder les modifications">Sauvegarder</button>
        <button id="cancelEdit" type="button" aria-label="Annuler les modifications">Annuler</button>
      </div>
    </div>
    <div class="edit-popup-overlay" aria-hidden="true"></div>
  </div>

  <!-- Popup de proposition de redimensionnement -->
  <div id="resizePopup" class="edit-popup" style="display: none;" role="dialog" aria-labelledby="resizePopupTitle" aria-modal="true">
    <div class="edit-popup-content">
      <h3 id="resizePopupTitle">Ajustement n√©cessaire</h3>
      <div class="edit-field">
        <p id="resizeMessage"></p>
      </div>
      <div class="edit-buttons">
        <button id="applyResize" type="button">Appliquer</button>
        <button id="cancelResize" type="button">Annuler</button>
      </div>
    </div>
    <div class="edit-popup-overlay" aria-hidden="true"></div>
  </div>

  <!-- Popup de gestion des projets -->
  <div id="projectModal" class="edit-popup" style="display: none;" role="dialog" aria-labelledby="projectModalTitle" aria-modal="true">
    <div class="edit-popup-content project-modal-content">
      <h3 id="projectModalTitle">üóÇÔ∏è Gestion des Projets</h3>

      <!-- Section Nouveau Projet -->
      <div class="project-section">
        <h4>üíæ Sauvegarder le projet actuel</h4>
        <div class="project-field">
          <input type="text" id="newProjectName" placeholder="Nom du projet..." maxlength="50">
          <button id="saveNewProject" type="button" class="btn-primary">Sauvegarder</button>
        </div>
      </div>

      <!-- Section Projets Existants -->
      <div class="project-section">
        <h4>üìÇ Projets sauvegard√©s</h4>
        <div id="projectsList" class="projects-list">
          <!-- Sera rempli dynamiquement -->
        </div>
      </div>

      <!-- Section Import/Export -->
      <div class="project-section">
        <h4>üì§ Import / Export</h4>
        <div class="import-export-controls">
          <button id="exportCurrentProject" type="button" class="btn-secondary">
            <svg class="icon" viewBox="0 0 24 24" aria-hidden="true">
              <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4" stroke="currentColor" stroke-width="2" fill="none"/>
              <polyline points="7,10 12,15 17,10" stroke="currentColor" stroke-width="2" fill="none"/>
              <line x1="12" y1="15" x2="12" y2="3" stroke="currentColor" stroke-width="2"/>
            </svg>
            Exporter projet actuel
          </button>
          <input type="file" id="importProjectFile" accept=".tontonkad,.json" style="display: none;">
          <button id="importProject" type="button" class="btn-secondary">
            <svg class="icon" viewBox="0 0 24 24" aria-hidden="true">
              <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4" stroke="currentColor" stroke-width="2" fill="none"/>
              <polyline points="17,8 12,3 7,8" stroke="currentColor" stroke-width="2" fill="none"/>
              <line x1="12" y1="3" x2="12" y2="15" stroke="currentColor" stroke-width="2"/>
            </svg>
            Importer projet
          </button>
        </div>
      </div>

      <!-- Section Auto-save -->
      <div class="project-section">
        <h4>üîÑ Auto-sauvegarde</h4>
        <div id="autoSaveInfo" class="auto-save-info">
          <!-- Sera rempli dynamiquement -->
        </div>
      </div>

      <!-- Boutons de fermeture -->
      <div class="edit-buttons">
        <button id="closeProjectModal" type="button" aria-label="Fermer">Fermer</button>
      </div>
    </div>
    <div class="edit-popup-overlay" aria-hidden="true"></div>
  </div>

</body></html>
